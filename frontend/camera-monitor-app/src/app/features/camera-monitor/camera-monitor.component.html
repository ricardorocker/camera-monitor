<div
  class="min-h-screen flex flex-col justify-between bg-purple-50 text-primary font-sans text-sm"
>
  <!-- Header -->
  <header
    class="h-14 flex items-center justify-between px-4 bg-primary text-white"
  >
    <span class="text-sm font-medium">{{ currentTime() }}</span>
    <span class="text-xs text-[#D4C3ED]">Ricardo S. Rocker</span>
    <img src="logo.png" alt="Logo" class="h-6 w-auto rounded" />
  </header>

  <!-- V√≠deo -->
  <div class="relative h-[210px] sm:h-[260px] bg-black">
    <video
      #videoPlayer
      class="w-full h-full object-cover"
      [src]="videoUrl()"
      autoplay
      muted
      loop
    ></video>
    <div
      class="absolute bottom-0 left-0 w-full px-3 py-1 bg-black bg-opacity-60 text-white text-[11px] flex items-center justify-between"
    >
      <div class="flex items-center gap-2">
        <button class="btn-pill bg-white text-primary font-bold text-[11px]">
          Hoje
        </button>
        <span class="text-red-500">‚óè</span>
        <span>08:32:02</span>
      </div>
      <div class="flex items-center gap-1 text-xs">
        <button
          class="px-2 sm:px-3 py-1 sm:py-2 rounded text-xs sm:text-sm font-medium btn-hover"
        >
          1x
        </button>
        <button
          class="p-1.5 sm:p-2 rounded btn-hover"
          (click)="entrarEmTelaCheia()"
        >
          <svg
            class="w-4 h-4 sm:w-5 sm:h-5 text-white"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"
            />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Filtros -->
  <div
    class="flex items-center justify-between px-4 py-2 bg-white text-xs border-b border-light"
  >
    <div class="flex gap-2">
      <button class="btn-pill">24 Horas</button>
      <button class="btn-pill">1 Hora</button>
      <button class="btn-pill bg-primary text-white font-bold">
        5 Minutos
      </button>
    </div>
    <div class="flex items-center gap-6 text-primary">
      <button>
        <div class="flex flex-col items-center space-y-0.5">
          <svg
            class="w-5 h-5 text-[#D4C3ED]"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M20 2H4C2.9 2 2 2.9 2 4v14l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM7 9h2v2H7V9zm4 0h2v2h-2V9zm4 0h2v2h-2V9z"
            />
          </svg>
          <span class="text-xs text-[#D4C3ED]">Chat</span>
        </div>
      </button>
      <button (click)="acionarAlerta()">
        <div class="flex flex-col items-center space-y-0.5">
          <svg
            class="w-5 h-5 text-[#D4C3ED]"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z" />
          </svg>
          <span class="text-xs text-[#D4C3ED]">Alerta</span>
        </div>
      </button>
    </div>
  </div>

  <!-- Timeline -->
  <div class="relative flex-1 overflow-y-auto px-4 py-3">
    <div
      class="absolute left-[70px] top-0 bottom-0 w-[2px] bg-primary z-0"
    ></div>
    <div class="space-y-6 relative z-10">
      @for (item of timeline(); track item.hora) {
      <div class="flex gap-4 items-start">
        <div
          class="w-12 text-right text-xs pt-2"
          [ngClass]="
            item.hora === '19:00' ? 'font-bold text-primary' : 'font-medium'
          "
        >
          {{ item.hora }}
        </div>
        <img
          [src]="item.frame"
          class="w-36 h-20 object-cover rounded-md border border-white shadow-md"
        />
      </div>
      }
    </div>
  </div>

  <!-- Footer -->
  <footer
    class="bg-white border-t border-light flex justify-around items-center text-xs py-2 text-primary"
  >
    <button class="footer-icon">
      <svg
        class="w-5 h-5 sm:w-6 sm:h-6"
        fill="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"
        />
      </svg>
      <span>C√¢meras</span>
    </button>
    <button class="footer-icon">
      <svg
        class="w-5 h-5 sm:w-6 sm:h-6"
        fill="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"
        />
      </svg>
      <span>V√≠deos</span>
    </button>
    <button class="footer-icon">
      <svg
        class="w-5 h-5 sm:w-6 sm:h-6"
        fill="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"
        />
      </svg>
      <span>Salvar</span>
    </button>
    <button class="footer-icon" (click)="capturarFrame()">
      <svg
        class="w-5 h-5 sm:w-6 sm:h-6"
        fill="currentColor"
        viewBox="0 0 24 24"
      >
        <path d="M12 12m-3.2 0a3.2 3.2 0 1 1 6.4 0a3.2 3.2 0 1 1 -6.4 0" />
        <path
          d="M9 2l1.17 1H14l1.17-1h1.66c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H7c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h2z"
        />
      </svg>
      <span>Captura</span>
    </button>
  </footer>
</div>

<!-- Modal de alerta -->
<div
  *ngIf="alertaAtivo()"
  class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50"
>
  <div class="bg-white rounded-xl p-6 text-center max-w-xs shadow-xl">
    <p class="text-lg font-bold text-primary">
      Acionar autoridades em {{ countdown() }}s
    </p>
    <p class="text-sm mt-2 text-gray-600">Toque em cancelar se for engano.</p>
    <button
      class="mt-4 px-4 py-2 rounded bg-red-600 text-white hover:bg-red-700"
      (click)="cancelarAlerta()"
    >
      Cancelar
    </button>
  </div>
</div>

<!-- Alert -->
<div
  *ngIf="acionamentoFinalizado()"
  class="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-600 text-white px-4 py-2 rounded-xl shadow-lg z-50 animate-bounce"
>
  üö® Autoridades acionadas!
</div>
